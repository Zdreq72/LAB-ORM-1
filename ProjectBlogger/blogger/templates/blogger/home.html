{% extends "blogger/base.html" %}
{% block title %}Latest posts{% endblock %}

{% block content %}
<section class="wrap">

    <div class="head">
        <h2 class="head-title">Latest posts</h2>
        <p class="head-sub">Newest notes appear first.</p>
    </div>

    {% if posts %}
    <div class="post-grid">
        {% for post in posts %}
        <article class="post">
            <a href="{% url 'blogger:detail' post.id %}" class="post-link">
                <div class="post-top">
                    <h3 class="post-title">{{ post.title }}</h3>
                    <span class="post-time">
                        <span class="material-symbols-rounded time-icon">schedule</span>
                        {{ post.published_at|date:"M d, Y Â· H:i" }}
                    </span>
                </div>

                {% if post.post_image %}
                <div class="post-image">
                    <img src="{{ post.post_image.url }}" alt="{{ post.title }}">
                </div>
                {% endif %}

                <p class="post-text">{{ post.content|truncatechars:140 }}</p>
            </a>
        </article>
        {% endfor %}
    </div>
    {% else %}
    <div class="empty">
        <p>No posts.</p>
        <a href="{% url 'blogger:add_post' %}" class="btn-main small-btn">Write the first</a>
    </div>
    {% endif %}

</section>
{% endblock %}